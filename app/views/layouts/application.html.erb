<!DOCTYPE html>
<html>
<head>
  <!--Let browser know website is optimized for mobile-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Mindandmusic</title>
  <%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track' => true %>
  <%= javascript_include_tag 'application', 'data-turbolinks-track' => true %>
  <!-- Compiled and minified CSS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.1/css/materialize.min.css">
  <link href="http://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

  <!-- Compiled and minified JavaScript -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.1/js/materialize.min.js"></script>
  <%= csrf_meta_tags %>
</head>
<body>

<!-- Nav links -->
<!-- Dropdown Structure -->
  <ul id="dropdown1" class="dropdown-content">
    <!-- link to most popular posts (shows the top 5 most clicked on posts)-->
    <li><%= link_to "Most Popular", popular_path%></li>
    <!-- link to my favorite/most interesting posts (shows the top 5 posts by rating, which I create when I make a post)-->
    <li><%= link_to "Author's Choice", favorite_path%></li>
    <!-- Setting an array equal to the links I want to have then iterating through tags and creating a link in navbar if the tag name is equal to the strings from array-->
    <% @tags.each do |tag| %>
    <% $types_of_posts = ["books", "articles", "videos"] %>

      <% if $types_of_posts.include?(tag.name) %>
        <li><%= link_to tag.name.capitalize, tag_path(tag), class: 'post_title_link'  %></li>
      <%end%>
    <% end %>
    <li><%= link_to "All Tags", tags_path%></li>
    
    <% if current_user && current_user.admin %>
      <li class><%= link_to "See Users", users_path%></li>
      <li><%= link_to "New Post", new_post_path%></li>  
    <%end%>
  </ul>
  <nav class = "navigation">
    <div class="nav-wrapper">
      <a href="/posts" class="brand-logo">M & M (Under Construction)</a>
      <ul class="right hide-on-med-and-down">
        <% if current_user %> 
            <li><%= link_to current_user.username, user_path(current_user) %></li> 
            <li><%= link_to "Log out", logout_path, method: "delete" %></li> 
        <% else %> 
            <li><%= link_to "Login", 'login' %></a></li> 
            <li><%= link_to "Signup", 'signup' %></a></li> 
        <% end %>
        <!-- Dropdown Trigger -->
        <li><a class="dropdown-button" href="#!" data-activates="dropdown1">Dropdown<i class="material-icons right">arrow_drop_down</i></a></li>
      </ul>
    </div>
  </nav>
        

<p class="flash"><%= flash.notice %></p>

<%= yield %>

<script>
$('.dropdown-button').dropdown({
  inDuration: 300,
  outDuration: 225,
  constrain_width: true, // Does not change width of dropdown to that of the activator
  hover: true, // Activate on hover
  gutter: 0, // Spacing from edge
  belowOrigin: false // Displays dropdown below the button
}
);
</script>

</body>
</html>
